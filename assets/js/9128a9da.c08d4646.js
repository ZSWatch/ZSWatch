"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4920],{8453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>o});var i=n(6540);const a={},t=i.createContext(a);function s(e){const r=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(t.Provider,{value:r},e.children)}},8991:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"firmware/firmware_updates","title":"Firmware Updates","description":"This page describes how to update ZSWatch firmware on WatchDK.","source":"@site/docs/firmware/firmware_updates.md","sourceDirName":"firmware","slug":"/firmware/firmware_updates","permalink":"/docs/firmware/firmware_updates","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Firmware","permalink":"/docs/category/firmware"},"next":{"title":"Firmware Recovery","permalink":"/docs/firmware/firmware_recovery"}}');var a=n(4848),t=n(8453);const s={sidebar_position:1},o="Firmware Updates",l={},h=[{value:"Enable Updates on the Watch",id:"enable-updates-on-the-watch",level:2},{value:"Method A: Web Updater (USB or BLE)",id:"method-a-web-updater-usb-or-ble",level:2},{value:"Firmware file naming",id:"firmware-file-naming",level:3},{value:"Method B: Flash via Debugger (SWD)",id:"method-b-flash-via-debugger-swd",level:2},{value:"Option B1: Flash a pre-built firmware (nrfjprog)",id:"option-b1-flash-a-pre-built-firmware-nrfjprog",level:3},{value:"Option B2: Build from source and flash",id:"option-b2-build-from-source-and-flash",level:3}];function d(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"firmware-updates",children:"Firmware Updates"})}),"\n",(0,a.jsx)(r.p,{children:"This page describes how to update ZSWatch firmware on WatchDK."}),"\n",(0,a.jsx)(r.h2,{id:"enable-updates-on-the-watch",children:"Enable Updates on the Watch"}),"\n",(0,a.jsx)(r.p,{children:"Before any update (USB, BLE, or SWD), enable updates on the watch:"}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsxs)(r.li,{children:["On the watch, go to ",(0,a.jsx)(r.strong,{children:"Apps \u2192 Update"}),"."]}),"\n",(0,a.jsxs)(r.li,{children:["Set ",(0,a.jsx)(r.strong,{children:"USB"})," and/or ",(0,a.jsx)(r.strong,{children:"BLE"})," to ",(0,a.jsx)(r.strong,{children:"ON"})," if you plan to use the web updater."]}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"method-a-web-updater-usb-or-ble",children:"Method A: Web Updater (USB or BLE)"}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsx)(r.li,{children:"Enable USB and/or BLE updates on the watch."}),"\n",(0,a.jsxs)(r.li,{children:["Open ",(0,a.jsx)(r.a,{href:"https://zswatch.dev/update",children:"https://zswatch.dev/update"}),"."]}),"\n",(0,a.jsx)(r.li,{children:"Select a WatchDK firmware image."}),"\n"]}),"\n",(0,a.jsx)(r.h3,{id:"firmware-file-naming",children:"Firmware file naming"}),"\n",(0,a.jsx)(r.p,{children:"The WatchDK firmware build is named:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"watchdk@1_nrf5340_cpuapp_debug"})}),"\n"]}),"\n",(0,a.jsxs)(r.admonition,{title:"TODO (developer workflow)",type:"note",children:[(0,a.jsxs)(r.p,{children:["Document how to flash a ",(0,a.jsx)(r.strong,{children:"locally built"})," firmware image without a debugger, using MCUboot and MCUmgr tools only (USB or BLE)."]}),(0,a.jsx)(r.p,{children:"For now, flashing self-built firmware is documented for the SWD/debugger path only."})]}),"\n",(0,a.jsx)(r.h2,{id:"method-b-flash-via-debugger-swd",children:"Method B: Flash via Debugger (SWD)"}),"\n",(0,a.jsx)(r.p,{children:"Use this method if you have a debugger connected (for example J-Link, or Nordic nRF54L15 DK) and a 10-pin 1.27mm SWD cable."}),"\n",(0,a.jsx)(r.h3,{id:"option-b1-flash-a-pre-built-firmware-nrfjprog",children:"Option B1: Flash a pre-built firmware (nrfjprog)"}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsxs)(r.li,{children:["Download the latest firmware hex from one of:","\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"https://github.com/ZSWatch/ZSWatch/releases",children:"https://github.com/ZSWatch/ZSWatch/releases"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"https://github.com/ZSWatch/ZSWatch/actions",children:"https://github.com/ZSWatch/ZSWatch/actions"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(r.li,{children:"Connect the debugger to the WatchDK SWD header."}),"\n",(0,a.jsx)(r.li,{children:"Flash the application core (and external flash configuration):"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"nrfjprog -f nrf53 \\\n  --program watchdk@1_nrf5340_cpuapp_debug.hex \\\n  --chiperase --qspisectorerase --verify --reset \\\n  --qspiini app/boards/zswatch/watchdk/support/qspi_mx25u51245.ini \\\n  --coprocessor CP_APPLICATION\n"})}),"\n",(0,a.jsxs)(r.ol,{start:"4",children:["\n",(0,a.jsx)(r.li,{children:"If you also need to re-flash the network core, flash CPUNET:"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"nrfjprog -f nrf53 \\\n  --program zswatch_nrf5340_CPUNET.hex \\\n  --chiperase --verify --reset \\\n  --coprocessor CP_NETWORK\n"})}),"\n",(0,a.jsx)(r.h3,{id:"option-b2-build-from-source-and-flash",children:"Option B2: Build from source and flash"}),"\n",(0,a.jsxs)(r.p,{children:["If you are building the firmware yourself, use the nRF Connect VS Code extension or ",(0,a.jsx)(r.code,{children:"west"}),"."]}),"\n",(0,a.jsx)(r.p,{children:"See:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"/docs/development/toolchain",children:"Toolchain Setup"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"/docs/development/compiling",children:"Compiling the Software"})}),"\n"]})]})}function c(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);
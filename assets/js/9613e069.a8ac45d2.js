"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3330],{1239:e=>{e.exports=JSON.parse('{"permalink":"/blog/progress-hr-fota","source":"@site/blog/2025-05-15-2-progress-hr-fota/index.md","title":"Health PCB and Firmware Update","description":"It\'s now been two months since our last update and a new one is very much due!","date":"2025-05-15T00:00:00.000Z","tags":[{"inline":false,"label":"ZSWatch","permalink":"/blog/tags/zswatch","description":"ZSWatch core"}],"readingTime":1.915,"hasTruncateMarker":true,"authors":[{"name":"Jakob Krantz","title":"Senior Software Engineer and ZSWatch Creator and Maintainer","url":"https://jakobkrantz.se","page":{"permalink":"/blog/authors/jakkra"},"socials":{"github":"https://github.com/jakkra","linkedin":"https://www.linkedin.com/in/jakob-krantz-ba9a97127/"},"imageURL":"https://github.com/jakkra.png","key":"jakkra"},{"name":"Daniel Kampert","itle":"Senior Hardware Engineer and ZSWatch Maintainer","url":"https://github.com/Kampi","page":{"permalink":"/blog/authors/kampi"},"socials":{"github":"https://github.com/Kampi"},"imageURL":"https://github.com/Kampi.png","key":"kampi"}],"frontMatter":{"slug":"progress-hr-fota","title":"Health PCB and Firmware Update","authors":["jakkra","kampi"],"tags":["zswatch"]},"unlisted":false,"nextItem":{"title":"Looking for feedback","permalink":"/blog/feedback"}}')},2487:(e,t,a)=>{a.d(t,{A:()=>s});const n={signup:"signup_Jd1d",center:"center_lsS9",signupTitle:"signupTitle_Ta4P",emailInput:"emailInput_uoO2",subscribeBtn:"subscribeBtn_r9gI",blogReminder:"blogReminder_Sf3u"};var r=a(4848);function s(){return(0,r.jsx)("form",{method:"post",action:"https://zswatch.pikapod.net/subscription/form",className:n.signup,children:(0,r.jsxs)("div",{className:n.center,children:[(0,r.jsx)("div",{className:n.signupTitle,children:"Sign up for updates here"}),(0,r.jsx)("input",{type:"hidden",name:"nonce"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Enter your email",className:n.emailInput}),(0,r.jsx)("input",{type:"submit",value:"Subscribe",className:n.subscribeBtn})]}),(0,r.jsx)("a",{href:"/blog",className:n.blogReminder,children:"Read the blog for latest info"}),(0,r.jsxs)("p",{hidden:!0,children:[(0,r.jsx)("input",{id:"2cca0",type:"checkbox",name:"l",defaultChecked:!0,value:"2cca0c50-ef0d-4339-b695-9e559f4a4359"}),(0,r.jsx)("label",{htmlFor:"2cca0",children:"ZSWatch Test List"}),(0,r.jsx)("br",{})]})]})})}},3658:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/fota-e84e16bec7af6daab9f64e51c1c1be43.png"},3842:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/hr_ble-9fc18b18688da18d738fe51b1b592167.jpg"},4160:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>h,default:()=>g,frontMatter:()=>d,metadata:()=>n,toc:()=>u});var n=a(1239),r=a(4848),s=a(8453),i=a(3658),o=a(4864),l=a(3842),c=a(2487);const d={slug:"progress-hr-fota",title:"Health PCB and Firmware Update",authors:["jakkra","kampi"],tags:["zswatch"]},h=void 0,p={authorsImageUrls:[void 0,void 0]},u=[{value:"Health Tracking Prototype",id:"health-tracking-prototype",level:3},{value:"Firmware Updates via BLE and USB",id:"firmware-updates-via-ble-and-usb",level:3},{value:"Bonus (XIP)",id:"bonus-xip",level:3},{value:"Next up",id:"next-up",level:3}];function m(e){const t={a:"a",br:"br",em:"em",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"It's now been two months since our last update and a new one is very much due!"}),"\n",(0,r.jsx)(t.p,{children:"We\u2019ve hit two major milestones:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"A prototype PCB for health tracking"}),"\n",(0,r.jsx)(t.li,{children:"Firmware updates over USB and BLE"}),"\n"]}),"\n",(0,r.jsx)("img",{src:o.A}),"\n",(0,r.jsx)(t.p,{children:"Let\u2019s dive into the details...."}),"\n",(0,r.jsx)(t.h3,{id:"health-tracking-prototype",children:"Health Tracking Prototype"}),"\n",(0,r.jsx)(t.p,{children:"We\u2019ve completed the design and assembly of a prototype board to validate the future health-tracking add-on PCB for ZSWatch. This board helps us test components, write drivers, and troubleshoot more easily before moving to a final compact version."}),"\n",(0,r.jsxs)(t.p,{children:["To simplify testing, we integrated an ",(0,r.jsx)(t.strong,{children:"nRF54L15 BLE MCU"}),", allowing the board to operate as a standalone unit."]}),"\n",(0,r.jsx)(t.p,{children:"The cool part? It can stream heart rate data live to the ZSWatch over Bluetooth! Below is a quick demo of heart rate data being plotted in real time. It's still very much a hacky prototype\u2014but it works."}),"\n",(0,r.jsx)("img",{src:l.A}),"\n",(0,r.jsxs)(t.p,{children:["Check out the in-progress driver and app here:",(0,r.jsx)(t.br,{}),"\n",(0,r.jsx)(t.a,{href:"https://github.com/ZSWatch/Zephyr-MAX32664C",children:"https://github.com/ZSWatch/Zephyr-MAX32664C"})]}),"\n",(0,r.jsx)(t.h3,{id:"firmware-updates-via-ble-and-usb",children:"Firmware Updates via BLE and USB"}),"\n",(0,r.jsx)(t.p,{children:"We\u2019ve added a bootloader, which means you can now update the ZSWatch firmware wirelessly via BLE\u2014or through USB (in case ZSWatch firmware breaks and Bluetooth isn\u2019t available.)."}),"\n",(0,r.jsxs)(t.p,{children:["Even better: you can update directly from the ",(0,r.jsx)(t.a,{href:"https://zswatch.dev/update",children:"Firmware Update page on zswatch.dev"}),".",(0,r.jsx)(t.br,{}),"\n","Firmware artifacts are pulled from GitHub Actions automatically, making updates simple."]}),"\n",(0,r.jsxs)(t.p,{children:["We also added support for uploading the full ",(0,r.jsx)(t.strong,{children:"filesystem image"}),", which contains most UI assets."]}),"\n",(0,r.jsx)("img",{src:i.A}),"\n",(0,r.jsx)(t.p,{children:"Improvements for later:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Ideally, only real known working releases should show"}),"\n",(0,r.jsx)(t.li,{children:"Bundle firmware and filesystem into a single update process"}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["You can also update the firmware using ",(0,r.jsx)(t.a,{href:"https://www.nordicsemi.com/Products/Development-tools/nRF-Connect-Device-Manager",children:"nRF Connect Device Manager"})," or other tools listed in the ",(0,r.jsx)(t.a,{href:"https://docs.zephyrproject.org/latest/services/device_mgmt/mcumgr.html#tools-libraries",children:"Zephyr documentation"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"bonus-xip",children:"Bonus (XIP)"}),"\n",(0,r.jsxs)(t.p,{children:["Another smaller, but very important update is that we after some fiddling around got ",(0,r.jsx)(t.strong,{children:"XIP (Execute-in-Place)"})," working on ZSWatch, allowing code to be run directly from the external flash. It was essential to fit the bootloader and USB support, and it opens up a lot more headroom for the firmware going forward."]}),"\n",(0,r.jsx)(t.h3,{id:"next-up",children:"Next up"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Evaluate the health tracking PCB\u2019s performance"}),"\n",(0,r.jsx)(t.li,{children:"Design a casing for wearing the health tracking PCB in order"}),"\n"]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Want to stay in the loop? Subscribe below for updates!"})}),"\n",(0,r.jsx)(c.A,{})]})}function g(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},4864:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/hr-c78029319a0701ee61bf8a1084c5aebb.jpg"},8453:(e,t,a)=>{a.d(t,{R:()=>i,x:()=>o});var n=a(6540);const r={},s=n.createContext(r);function i(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);
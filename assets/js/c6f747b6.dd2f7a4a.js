"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[722],{5262:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/dk_jumper_setup-4989550b282e5a0671cec1a95f15a75e.png"},6733:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/prod_test_hw-3e7dd9987d9bfb9fc32597c8657dbf5a.jpg"},6912:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"hw-testing/hw-testing","title":"WatchDK Production Testing Guide","description":"This guide describes how to run the production test on the ZSWatch Development Kit (WatchDK) to verify that all hardware components are working correctly.","source":"@site/docs/hw-testing/hw-testing.md","sourceDirName":"hw-testing","slug":"/hw-testing/","permalink":"/docs/hw-testing/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Hardware testing","permalink":"/docs/category/hardware-testing"}}');var s=t(4848),i=t(8453);const o={sidebar_position:1},l="WatchDK Production Testing Guide",c={},a=[{value:"Required Equipment",id:"required-equipment",level:2},{value:"Software Requirements",id:"software-requirements",level:2},{value:"Hardware Setup",id:"hardware-setup",level:2},{value:"Flashing the Test Firmware",id:"flashing-the-test-firmware",level:2},{value:"Test Sequence",id:"test-sequence",level:2},{value:"Video Walkthrough",id:"video-walkthrough",level:3},{value:"1. Button Test",id:"1-button-test",level:3},{value:"2. Vibration Test",id:"2-vibration-test",level:3},{value:"3. Backlight Test",id:"3-backlight-test",level:3},{value:"4. Touch Test",id:"4-touch-test",level:3},{value:"5. Microphone Test",id:"5-microphone-test",level:3},{value:"6. Sensor Scan (Automatic)",id:"6-sensor-scan-automatic",level:3},{value:"7. Final Result",id:"7-final-result",level:3},{value:"Re-running Tests",id:"re-running-tests",level:2},{value:"Post Test - Flashing ZSWatch Firmware",id:"post-test---flashing-zswatch-firmware",level:2},{value:"Full Expected Output",id:"full-expected-output",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"watchdk-production-testing-guide",children:"WatchDK Production Testing Guide"})}),"\n",(0,s.jsx)(n.p,{children:"This guide describes how to run the production test on the ZSWatch Development Kit (WatchDK) to verify that all hardware components are working correctly."}),"\n",(0,s.jsx)(n.h2,{id:"required-equipment",children:"Required Equipment"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"USB-C cable"})," - for power"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SEGGER J-Link debugger or Nordic nRF Dev Kit"})," (e.g., nRF54KL15DK) - for programming the device"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ZSWatch Development kit (WatchDK)"})," - the device under test"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Vibration motor"})," - must be connected to the WatchDK"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Display"})," - must be connected to the WatchDK"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"software-requirements",children:"Software Requirements"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.segger.com/downloads/jlink/",children:"Segger J-Link Software"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"nrfjprog"})," (part of ",(0,s.jsx)(n.a,{href:"https://www.nordicsemi.com/Products/Development-tools/nRF-Command-Line-Tools/Download?lang=en#infotabs",children:"nRF Command Line Tools"}),") and add to PATH"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"hardware-setup",children:"Hardware Setup"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Connect the J-Link debugger to the WatchDK debug header"}),"\n",(0,s.jsx)(n.li,{children:"Connect the vibration motor and display to the designated connector"}),"\n",(0,s.jsx)(n.li,{children:"Mount all jumpers if not already mounted according to image below"}),"\n",(0,s.jsx)(n.li,{children:"Connect USB-C cable for power. No battery needed."}),"\n"]}),"\n",(0,s.jsxs)("div",{style:{padding:"0 20px"},children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Production test hardware setup",src:t(5262).A+"",width:"1419",height:"1004"})}),(0,s.jsx)("div",{style:{textAlign:"center",fontSize:"0.9em"},children:(0,s.jsx)(n.p,{children:"Jumper configuration for production testing. Ensure all jumpers are mounted as shown."})})]}),"\n",(0,s.jsxs)("div",{style:{padding:"0 20px"},children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Production test hardware setup",src:t(6733).A+"",width:"1000",height:"752"})}),(0,s.jsx)("div",{style:{textAlign:"center",fontSize:"0.9em"},children:(0,s.jsx)(n.p,{children:"Full setup, ignore the battery, not needed."})})]}),"\n",(0,s.jsx)(n.h2,{id:"flashing-the-test-firmware",children:"Flashing the Test Firmware"}),"\n",(0,s.jsxs)(n.p,{children:["Download the pre-built production test firmware or build it from source in ",(0,s.jsx)(n.code,{children:"production_test/"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Firmware can be downloaded from Github and is part of ci build artifacts:\n",(0,s.jsx)(n.code,{children:"watchdk@1_nrf5340_cpuapp_debug/production_test_watchdk.hex"})]}),"\n",(0,s.jsx)(n.p,{children:"Flash using nrfjprog:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"nrfjprog --recover --coprocessor CP_NETWORK -f nrf53\nnrfjprog --recover -f nrf53\nnrfjprog --program production_test_watchdk.hex --chiperase --verify --reset -f nrf53\n"})}),"\n",(0,s.jsx)(n.h2,{id:"test-sequence",children:"Test Sequence"}),"\n",(0,s.jsxs)(n.p,{children:["The production test runs automatically through the following tests in order. Each interactive test has a ",(0,s.jsx)(n.strong,{children:"15-second timeout"}),". The UI will guide you, but here is a short summary of what it does."]}),"\n",(0,s.jsx)(n.h3,{id:"video-walkthrough",children:"Video Walkthrough"}),"\n",(0,s.jsx)(n.p,{children:"Watch a full run of the production test app to see the expected prompts and pacing before you start."}),"\n",(0,s.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.2)"},children:(0,s.jsx)("iframe",{src:"https://player.vimeo.com/video/1141434425?badge=0&autopause=0&player_id=0&app_id=58479",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share",referrerpolicy:"strict-origin-when-cross-origin",title:"WatchDK production test walk-through"})}),"\n",(0,s.jsxs)(n.p,{children:["Direct link to video: ",(0,s.jsx)(n.a,{href:"https://vimeo.com/1141434425",children:"https://vimeo.com/1141434425"})]}),"\n",(0,s.jsx)(n.h3,{id:"1-button-test",children:"1. Button Test"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Action:"})," Press all 4 buttons (top-left, top-right, bottom-left, bottom-right)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Pass criteria:"})," All buttons registered"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," The countdown timer starts after the first button press"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-vibration-test",children:"2. Vibration Test"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Action:"})," The vibration motor pulses repeatedly. Press any button if you feel it vibrating"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Pass criteria:"})," User confirms vibration by pressing a button"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-backlight-test",children:"3. Backlight Test"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Action:"})," Press any button to start. The display brightness will cycle between low and high"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Pass criteria:"})," Press any button to confirm the brightness changed visibly"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"4-touch-test",children:"4. Touch Test"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Action:"})," Touch the display"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Pass criteria:"})," Touch input detected"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"5-microphone-test",children:"5. Microphone Test"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Action:"})," Make some noise (speak, clap, tap near the microphone)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Pass criteria:"})," Audio activity detected above threshold"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"6-sensor-scan-automatic",children:"6. Sensor Scan (Automatic)"}),"\n",(0,s.jsx)(n.p,{children:"The following sensors are checked automatically at boot. Results are shown if any test failed."}),"\n",(0,s.jsx)(n.h3,{id:"7-final-result",children:"7. Final Result"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Shows ",(0,s.jsx)(n.strong,{children:"PASS"})," (green) or ",(0,s.jsx)(n.strong,{children:"FAIL"})," (red) summary"]}),"\n",(0,s.jsx)(n.li,{children:"Displays count of passed vs total tests"}),"\n",(0,s.jsx)(n.li,{children:"Press any button to reboot and run tests again"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"re-running-tests",children:"Re-running Tests"}),"\n",(0,s.jsx)(n.p,{children:"Press any button on the final result screen to reboot and start a fresh test run."}),"\n",(0,s.jsx)(n.h2,{id:"post-test---flashing-zswatch-firmware",children:"Post Test - Flashing ZSWatch Firmware"}),"\n",(0,s.jsx)(n.p,{children:"After a successful production test, flash the full ZSWatch firmware:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 1:"})," Flash the app core (with QSPI configuration):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"nrfjprog --program watchdk@1_nrf5340_cpuapp_debug.hex --chiperase --qspisectorerase --verify --reset --qspiini app/boards/zswatch/watchdk/support/qspi_mx25u51245.ini --coprocessor CP_APPLICATION -f nrf53\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 2:"})," Flash the net core:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"nrfjprog --program zswatch_nrf5340_CPUNET.hex --chiperase --verify --reset --coprocessor CP_NETWORK -f nrf53\n"})}),"\n",(0,s.jsx)(n.h3,{id:"full-expected-output",children:"Full Expected Output"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 1 - Recover network core:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$ nrfjprog --recover --coprocessor CP_NETWORK -f nrf53\nRecovering device. This operation might take 30s.\nErasing user code and UICR flash areas.\nWriting image to disable ap protect.\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 2 - Recover app core:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$ nrfjprog --recover -f nrf53\nRecovering device. This operation might take 30s.\nErasing user code and UICR flash areas.\nWriting image to disable ap protect.\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 3 - Flash production test firmware:"})}),"\n",(0,s.jsx)(n.p,{children:"Now you would runt he production test sequence."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$ nrfjprog --program production_test_watchdk.hex --chiperase --verify --reset -f nrf53\n[ #################### ]   0.352s | Erase file - Done erasing\n[ #################### ]   2.994s | Program file - Done programming\n[ #################### ]   3.003s | Verify file - Done verifying\nApplying system reset.\nRun.\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 1 - Flash net core image:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$ nrfjprog --program zswatch_nrf5340_CPUNET.hex --chiperase --verify --reset --coprocessor CP_NETWORK -f nrf53\n[ #################### ]   0.293s | Erase file - Done erasing\n[ #################### ]   1.338s | Program file - Done programming\n[ #################### ]   1.345s | Verify file - Done verifying\nApplying system reset.\nRun.\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 5 - Flash app core image:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$ nrfjprog --program watchdk@1_nrf5340_cpuapp_debug.hex --chiperase --qspisectorerase --verify --reset --qspiini qspi_mx25u51245.ini --coprocessor CP_APPLICATION -f nrf53\n[ #################### ]   0.000s | Erasing non-volatile memory - Erase successful\n[ #################### ]   1.611s | Erase file - Done erasing\n[ #################### ]  11.610s | Program file - Done programming\n[ #################### ]  11.506s | Verify file - Done verifying\nApplying system reset.\nRun.\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var r=t(6540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);